<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>PHP5各个版本特性与区别 | 13sai blog</title><meta name="description" content="PHP 5.2、5.3、5.4、5.5、5.6 版本区别对比以及新功能详解"><meta name="keywords" content="php"><meta name="author" content="13sai"><meta name="copyright" content="13sai"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="PHP5各个版本特性与区别"><meta name="twitter:description" content="PHP 5.2、5.3、5.4、5.5、5.6 版本区别对比以及新功能详解"><meta name="twitter:image" content="http://github.13sai.com/upload/article/14919848041.png"><meta property="og:type" content="article"><meta property="og:title" content="PHP5各个版本特性与区别"><meta property="og:url" content="http://github.13sai.com/2017/04/12/118/"><meta property="og:site_name" content="13sai blog"><meta property="og:description" content="PHP 5.2、5.3、5.4、5.5、5.6 版本区别对比以及新功能详解"><meta property="og:image" content="http://github.13sai.com/upload/article/14919848041.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://github.13sai.com/2017/04/12/118/"><link rel="prev" title="wamp一直橙色，而80端口又未被占用" href="http://github.13sai.com/2017/04/13/119/"><link rel="next" title="mouseover,mouseout,mouseenter,mouseleave的区别" href="http://github.13sai.com/2017/04/05/117/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: {"text":"nginx,redis,php,go,linux,js,web,mysql,python,html","fontSize":"15px"},
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">13sai blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 分类</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/nginx/"><i class="fa-fw"></i><span> Nginx</span></a></li><li><a class="site-page" href="/categories/mysql/"><i class="fa-fw"></i><span> Mysql</span></a></li><li><a class="site-page" href="/categories/php/"><i class="fa-fw"></i><span> PHP</span></a></li><li><a class="site-page" href="/categories/redis/"><i class="fa-fw"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 书签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="http://image.13sai.com/sai.jpg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">150</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">30</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">23</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 分类</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/nginx/"><i class="fa-fw"></i><span> Nginx</span></a></li><li><a class="site-page" href="/categories/mysql/"><i class="fa-fw"></i><span> Mysql</span></a></li><li><a class="site-page" href="/categories/php/"><i class="fa-fw"></i><span> PHP</span></a></li><li><a class="site-page" href="/categories/redis/"><i class="fa-fw"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 书签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">PHP5.2以前</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">autoload</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">PDO 和 MySQLi</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">类型约束</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">PHP5.2</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">JSON 支持</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">PHP5.3</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">弃用的功能</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.1.1.</span> <span class="toc_mobile_items-text">Register Globals</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.1.2.</span> <span class="toc_mobile_items-text">Magic Quotes</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.1.3.</span> <span class="toc_mobile_items-text">Safe Mode</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text">匿名函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.3.</span> <span class="toc_mobile_items-text">魔术方法：invoke(), __callStatic()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.4.</span> <span class="toc_mobile_items-text">命名空间</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.5.</span> <span class="toc_mobile_items-text">后期静态绑定</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.6.</span> <span class="toc_mobile_items-text">Heredoc 和 Nowdoc</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.7.</span> <span class="toc_mobile_items-text">用 const 定义常量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.8.</span> <span class="toc_mobile_items-text">三元运算符简写形式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">5.9.</span> <span class="toc_mobile_items-text">Phar</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">PHP5.4</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">Short Open Tag</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">7.1.</span> <span class="toc_mobile_items-text">数组简写形式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">7.2.</span> <span class="toc_mobile_items-text">Traits</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">7.3.</span> <span class="toc_mobile_items-text">内置 Web 服务器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">7.4.</span> <span class="toc_mobile_items-text">细节修改</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">PHP5.5</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">8.1.</span> <span class="toc_mobile_items-text">yield</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">8.2.</span> <span class="toc_mobile_items-text">list() 用于 foreach</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">8.3.</span> <span class="toc_mobile_items-text">细节修改</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">9.</span> <span class="toc_mobile_items-text">PHP5.6</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">9.1.</span> <span class="toc_mobile_items-text">更好的常量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">9.2.</span> <span class="toc_mobile_items-text">更好的可变函数参数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#null"><span class="toc_mobile_items-number">9.3.</span> <span class="toc_mobile_items-text">命名空间</span></a></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">1.</span> <span class="toc-text">PHP5.2以前</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">2.</span> <span class="toc-text">autoload</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">3.</span> <span class="toc-text">PDO 和 MySQLi</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">3.1.</span> <span class="toc-text">类型约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">4.</span> <span class="toc-text">PHP5.2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">4.1.</span> <span class="toc-text">JSON 支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">5.</span> <span class="toc-text">PHP5.3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.1.</span> <span class="toc-text">弃用的功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#null"><span class="toc-number">5.1.1.</span> <span class="toc-text">Register Globals</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#null"><span class="toc-number">5.1.2.</span> <span class="toc-text">Magic Quotes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#null"><span class="toc-number">5.1.3.</span> <span class="toc-text">Safe Mode</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.2.</span> <span class="toc-text">匿名函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.3.</span> <span class="toc-text">魔术方法：invoke(), __callStatic()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.4.</span> <span class="toc-text">命名空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.5.</span> <span class="toc-text">后期静态绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.6.</span> <span class="toc-text">Heredoc 和 Nowdoc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.7.</span> <span class="toc-text">用 const 定义常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.8.</span> <span class="toc-text">三元运算符简写形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">5.9.</span> <span class="toc-text">Phar</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">6.</span> <span class="toc-text">PHP5.4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">7.</span> <span class="toc-text">Short Open Tag</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">7.1.</span> <span class="toc-text">数组简写形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">7.2.</span> <span class="toc-text">Traits</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">7.3.</span> <span class="toc-text">内置 Web 服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">7.4.</span> <span class="toc-text">细节修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">8.</span> <span class="toc-text">PHP5.5</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">8.1.</span> <span class="toc-text">yield</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">8.2.</span> <span class="toc-text">list() 用于 foreach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">8.3.</span> <span class="toc-text">细节修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-number">9.</span> <span class="toc-text">PHP5.6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">9.1.</span> <span class="toc-text">更好的常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">9.2.</span> <span class="toc-text">更好的可变函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">9.3.</span> <span class="toc-text">命名空间</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/upload/article/14919848041.png)"><div id="post-info"><div id="post-title"><div class="posttitle">PHP5各个版本特性与区别</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2017-04-12<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-11-21</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/php/">php</a></span><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"> <p><br/>本文将会介绍自 PHP5.2 起，直至 PHP5.6 中增加的新特征。</p><ul class=" list-paddingleft-2"><li><p>PHP5.2 以前：autoload, PDO 和 MySQLi, 类型约束</p></li><li><p>PHP5.2：JSON 支持</p></li><li><p>PHP5.3：弃用的功能，匿名函数，新增魔术方法，命名空间，后期静态绑定，Heredoc 和 Nowdoc, const, 三元运算符，Phar</p></li><li><p>PHP5.4：Short Open Tag, 数组简写形式，Traits, 内置 Web 服务器，细节修改</p></li><li><p>PHP5.5：yield, list() 用于 foreach, 细节修改</p></li><li><p>PHP5.6: 常量增强，可变函数参数，命名空间增强</p></li></ul><p>注：已于2011年1月停止支持： <a rel="nofollow external" href="http://www.php.net/eol.php" target="_blank">http://www.php.net/eol.php</a><br/>注：<a rel="nofollow external" href="http://w3techs.com/technologies/details/pl-php/5/all" target="_blank">http://w3techs.com/technologies/details/pl-php/5/all</a></p><h2>PHP5.2以前</h2><p>(2006前)<br/>顺便介绍一下 PHP5.2 已经出现但值得介绍的特征。</p><h2>autoload</h2><p>大家可能都知道 __autoload() 函数，如果定义了该函数，那么当在代码中使用一个未定义的类的时候，该函数就会被调用，你可以在该函数中加载相应的类实现文件，如：</p><pre>function&nbsp;__autoload($classname)
{
&nbsp;&nbsp;&nbsp;&nbsp;require_once(&quot;{$classname}.php&quot;)
}</pre><p>但该函数已经不被建议使用，原因是一个项目中仅能有一个这样的 __autoload() 函数，因为 PHP 
不允许函数重名。但当你使用一些类库的时候，难免会出现多个 autoload 函数的需要，于是 spl_autoload_register() 
取而代之：</p><pre>spl_autoload_register(function($classname)
{
&nbsp;&nbsp;&nbsp;&nbsp;require_once(&quot;{$classname}.php&quot;)
});</pre><p>spl_autoload_register() 会将一个函数注册到 autoload 函数列表中，当出现未定义的类的时候，SPL [注] 
会按照注册的倒序逐个调用被注册的 autoload 函数，这意味着你可以使用 spl_autoload_register() 注册多个 
autoload 函数.</p><p>注：SPL: Standard PHP Library, 标准 PHP 库, 被设计用来解决一些经典问题(如数据结构).</p><h2>PDO 和 MySQLi</h2><p>即 PHP Data Object, PHP 数据对象，这是 PHP 的新式数据库访问接口。</p><p>按照传统的风格，访问 MySQL 数据库应该是这样子：</p><pre>//&nbsp;连接到服务器，选择数据库
$conn&nbsp;=&nbsp;mysql_connect(&quot;localhost&quot;,&nbsp;&quot;user&quot;,&nbsp;&quot;password&quot;);
mysql_select_db(&quot;database&quot;);

<p>//&nbsp;执行&nbsp;SQL&nbsp;查询<br>$type&nbsp;=&nbsp;$_POST[&#39;type&#39;];<br>$sql&nbsp;=&nbsp;&quot;SELECT&nbsp;*&nbsp;FROM&nbsp;<code>table</code>&nbsp;WHERE&nbsp;<code>type</code>&nbsp;=&nbsp;{$type}&quot;;<br>$result&nbsp;=&nbsp;mysql_query($sql);</p>
<p>//&nbsp;打印结果<br>while($row&nbsp;=&nbsp;mysql_fetch_array($result,&nbsp;MYSQL_ASSOC))<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach($row&nbsp;as&nbsp;$k&nbsp;=&amp;gt;&nbsp;$v)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;{$k}:&nbsp;{$v}<br>&quot;;<br>}</p>
<p>//&nbsp;释放结果集，关闭连接<br>mysql_free_result($result);<br>mysql_close($conn);</pre><p>为了能够让代码实现数据库无关，即一段代码同时适用于多种数据库(例如以上代码仅仅适用于MySQL)，PHP 官方设计了 PDO.<br/>除此之外，PDO 还提供了更多功能，比如：</p><ul class=" list-paddingleft-2"><li><p>面向对象风格的接口</p></li><li><p>SQL预编译(prepare), 占位符语法</p></li><li><p>更高的执行效率，作为官方推荐，有特别的性能优化</p></li><li><p>支持大部分SQL数据库，更换数据库无需改动代码</p></li></ul><p>上面的代码用 PDO 实现将会是这样：</p><pre>//&nbsp;连接到数据库<br>$conn&nbsp;=&nbsp;new&nbsp;PDO(&quot;mysql:host=localhost;dbname=database&quot;,&nbsp;&quot;user&quot;,&nbsp;&quot;password&quot;);</p>
<p>//&nbsp;预编译SQL,&nbsp;绑定参数<br>$query&nbsp;=&nbsp;$conn-&amp;gt;prepare(&quot;SELECT&nbsp;*&nbsp;FROM&nbsp;<code>table</code>&nbsp;WHERE&nbsp;<code>type</code>&nbsp;=&nbsp;:type&quot;);<br>$query-&amp;gt;bindParam(&quot;type&quot;,&nbsp;$_POST[&#39;type&#39;]);</p>
<p>//&nbsp;执行查询并打印结果<br>foreach($query-&amp;gt;execute()&nbsp;as&nbsp;$row)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach($row&nbsp;as&nbsp;$k&nbsp;=&amp;gt;&nbsp;$v)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;{$k}:&nbsp;{$v}<br>&quot;;<br>}</pre><p>PDO 是官方推荐的，更为通用的数据库访问方式，如果你没有特殊需求，那么你最好学习和使用 PDO.<br/>但如果你需要使用 MySQL 所特有的高级功能，那么你可能需要尝试一下 MySQLi, 因为 PDO 为了能够同时在多种数据库上使用，不会包含那些 MySQL 独有的功能。</p><p>MySQLi 是 MySQL 的增强接口，同时提供面向过程和面向对象接口，也是目前推荐的 MySQL 驱动，旧的C风格 MySQL 接口将会在今后被默认关闭。<br/>MySQLi 的用法和以上两段代码相比，没有太多新概念，在此不再给出示例，可以参见 PHP 官网文档 [注]。</p><p>注：<a rel="nofollow external" href="http://www.php.net/manual/en/mysqli.quickstart.php" target="_blank">http://www.php.net/manual/en/mysqli.quickstart.php</a></p><h3>类型约束</h3><p>通过类型约束可以限制参数的类型，不过这一机制并不完善，目前仅适用于类和 callable(可执行类型) 以及 array(数组), 不适用于 string 和 int.</p><pre>//&nbsp;限制第一个参数为&nbsp;MyClass,&nbsp;第二个参数为可执行类型，第三个参数为数组<br>function&nbsp;MyFunction(MyClass&nbsp;$a,&nbsp;callable&nbsp;$b,&nbsp;array&nbsp;$c)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>}</pre><h2>PHP5.2</h2><p>(2006-2011)</p><h3>JSON 支持</h3><p>包括 json_encode(), json_decode() 等函数，JSON 算是在 Web 领域非常常用的数据交换格式，可以被 JS 直接支持，JSON 实际上是 JS 语法的一部分。<br/>JSON 系列函数，可以将 PHP 中的数组结构与 JSON 字符串进行转换：</p><pre>$array&nbsp;=&nbsp;[&quot;key&quot;&nbsp;=&amp;gt;&nbsp;&quot;value&quot;,&nbsp;&quot;array&quot;&nbsp;=&amp;gt;&nbsp;[1,&nbsp;2,&nbsp;3,&nbsp;4]];<br>$json&nbsp;=&nbsp;json_encode($array);<br>echo&nbsp;&quot;{$json}<br>&quot;;</p>
<p>$object&nbsp;=&nbsp;json_decode($json);<br>print_r($object);</pre><p>输出：</p><pre>{&quot;key&quot;:&quot;value&quot;,&quot;array&quot;:[1,2,3,4]}<br>stdClass&nbsp;Object<br>(<br>&nbsp;&nbsp;&nbsp;&nbsp;[key]&nbsp;=&amp;gt;&nbsp;value<br>&nbsp;&nbsp;&nbsp;&nbsp;[array]&nbsp;=&amp;gt;&nbsp;Array<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0]&nbsp;=&amp;gt;&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1]&nbsp;=&amp;gt;&nbsp;2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2]&nbsp;=&amp;gt;&nbsp;3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[3]&nbsp;=&amp;gt;&nbsp;4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>)</pre><p>值得注意的是 json_decode() 默认会返回一个对象而非数组，如果需要返回数组需要将第二个参数设置为 true.</p><h2>PHP5.3</h2><p>(2009-2012)</p><p>PHP5.3 算是一个非常大的更新，新增了大量新特征，同时也做了一些不向下兼容的修改。</p><h3>弃用的功能</h3><p>以下几个功能被弃用，若在配置文件中启用，则 PHP 会在运行时发出警告。</p><h4>Register Globals</h4><p>这是 php.ini 中的一个选项(register_globals), 开启后会将所有表单变量($_GET和$_POST)注册为全局变量.<br/>看下面的例子：</p><pre>if(isAuth())<br>&nbsp;&nbsp;&nbsp;&nbsp;$authorized&nbsp;=&nbsp;true;<br>if($authorized)<br>&nbsp;&nbsp;&nbsp;&nbsp;include(&quot;page.php&quot;);</pre><p>这段代码在通过验证时，将 $authorized 设置为 true. 然后根据 $authorized 的值来决定是否显示页面.</p><p>但由于并没有事先把 $authorized 初始化为 false, 当 register_globals 打开时，可能访问 /auth.php?authorized=1 来定义该变量值，绕过身份验证。</p><p>该特征属于历史遗留问题，在 PHP4.2 中被默认关闭，在 PHP5.4 中被移除。</p><h4>Magic Quotes</h4><p>对应 php.ini 中的选项 magic_quotes_gpc, 这个特征同样属于历史遗留问题，已经在 PHP5.4 中移除。</p><p>该特征会将所有用户输入进行转义，这看上去不错，在第一章我们提到过要对用户输入进行转义。<br/>但是 PHP 并不知道哪些输入会进入 SQL , 哪些输入会进入 Shell, 哪些输入会被显示为 HTML, 所以很多时候这种转义会引起混乱。</p><h4>Safe Mode</h4><p>很多虚拟主机提供商使用 Safe Mode 来隔离多个用户，但 Safe Mode 存在诸多问题，例如某些扩展并不按照 Safe Mode 来进行权限控制。<br/>PHP官方推荐使用操作系统的机制来进行权限隔离，让Web服务器以不同的用户权限来运行PHP解释器，请参见第一章中的最小权限原则.</p><h3>匿名函数</h3><p>也叫闭包(Closures), 经常被用来临时性地创建一个无名函数，用于回调函数等用途。</p><pre>$func&nbsp;=&nbsp;function($arg)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;$arg;<br>};</p>
<p>$func(&quot;Hello&nbsp;World&quot;);</pre><p>以上代码定义了一个匿名函数，并赋值给了 $func.<br/>可以看到定义匿名函数依旧使用 function 关键字，只不过省略了函数名，直接是参数列表。</p><p>然后我们又调用了 $func 所储存的匿名函数。</p><p>匿名函数还可以用 use 关键字来捕捉外部变量：</p><pre>function&nbsp;arrayPlus($array,&nbsp;$num)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;array_walk($array,&nbsp;function(&amp;amp;$v)&nbsp;use($num){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$v&nbsp;+=&nbsp;$num;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>}</pre><p>上面的代码定义了一个 arrayPlus() 函数(这不是匿名函数), 它会将一个数组($array)中的每一项，加上一个指定的数字($num).</p><p>在 arrayPlus() 的实现中，我们使用了 array_walk() 函数，它会为一个数组的每一项执行一个回调函数，即我们定义的匿名函数。<br/>在匿名函数的参数列表后，我们用 use 关键字将匿名函数外的 $num 捕捉到了函数内，以便知道到底应该加上多少。</p><h3>魔术方法：<strong>invoke(), __callStatic()</h3><p>PHP 的面向对象体系中，提供了若干“魔术方法”，用于实现类似其他语言中的“重载”，如在访问不存在的属性、方法时触发某个魔术方法。</p><p>随着匿名函数的加入，PHP 引入了一个新的魔术方法 __invoke().<br/>该魔术方法会在将一个对象作为函数调用时被调用：</p><pre>class&nbsp;A<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</strong>invoke($str)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;A::__invoke():&nbsp;{$str}&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p>
<p>$a&nbsp;=&nbsp;new&nbsp;A;<br>$a(&quot;Hello&nbsp;World&quot;);</pre><p>输出毫无疑问是：</p><pre>A::<strong>invoke():&nbsp;Hello&nbsp;World</pre><p></strong>callStatic() 则会在调用一个不存在的静态方法时被调用。</p><h3>命名空间</h3><p>PHP的命名空间有着前无古人后无来者的无比蛋疼的语法：</p><pre>&amp;lt;?php<br>//&nbsp;命名空间的分隔符是反斜杠，该声明语句必须在文件第一行。<br>//&nbsp;命名空间中可以包含任意代码，但只有&nbsp;<strong>类,&nbsp;函数,&nbsp;常量</strong>&nbsp;受命名空间影响。<br>namespace&nbsp;XXOO\Test;</p>
<p>//&nbsp;该类的完整限定名是&nbsp;\XXOO\Test\A&nbsp;,&nbsp;其中第一个反斜杠表示全局命名空间。<br>class&nbsp;A{}</p>
<p>//&nbsp;你还可以在已经文件中定义第二个命名空间，接下来的代码将都位于&nbsp;\Other\Test2&nbsp;.<br>namespace&nbsp;Other\Test2;</p>
<p>//&nbsp;实例化来自其他命名空间的对象：<br>$a&nbsp;=&nbsp;new&nbsp;\XXOO\Test\A;<br>class&nbsp;B{}</p>
<p>//&nbsp;你还可以用花括号定义第三个命名空间<br>namespace&nbsp;Other&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;实例化来自子命名空间的对象：<br>&nbsp;&nbsp;&nbsp;&nbsp;$b&nbsp;=&nbsp;new&nbsp;Test2\B;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;导入来自其他命名空间的名称，并重命名，<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;注意只能导入类，不能用于函数和常量。<br>&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;\XXOO\Test\A&nbsp;as&nbsp;ClassA<br>}</pre><p>更多有关命名空间的语法介绍请参见官网 [注].</p><p>命名空间时常和 autoload 一同使用，用于自动加载类实现文件：</p><pre>spl_autoload_register(<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;($class)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spl_autoload(str_replace(&quot;&amp;quot;,&nbsp;&quot;/&quot;,&nbsp;$class));<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>);</pre><p>当你实例化一个类 \XXOO\Test\A 的时候，这个类的完整限定名会被传递给 autoload 函数，autoload 函数将类名中的命名空间分隔符(反斜杠)替换为斜杠，并包含对应文件。<br/>这样可以实现类定义文件分级储存，按需自动加载。</p><p>注：<a rel="nofollow external" href="http://www.php.net/manual/zh/language.namespaces.php" target="_blank">http://www.php.net/manual/zh/language.namespaces.php</a></p><h3>后期静态绑定</h3><p>PHP 的 OPP 机制，具有继承和类似虚函数的功能，例如如下的代码：</p><pre>class&nbsp;A<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;callFuncXXOO()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;$this-&amp;gt;funcXXOO();<br>&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;funcXXOO()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;A::funcXXOO()&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p>
<p>class&nbsp;B&nbsp;extends&nbsp;A<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;funcXXOO()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;B::funcXXOO&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p>
<p>$b&nbsp;=&nbsp;new&nbsp;B;<br>$b-&amp;gt;callFuncXXOO();</pre><p>输出是：</p><pre>B::funcXXOO</pre><p>可以看到，当在 A 中使用 $this-&gt;funcXXOO() 时，体现了“虚函数”的机制，实际调用的是 B::funcXXOO().<br/>然而如果将所有函数都改为静态函数：</p><pre>class&nbsp;A<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;public&nbsp;function&nbsp;callFuncXXOO()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;self::funcXXOO();<br>&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;public&nbsp;function&nbsp;funcXXOO()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;A::funcXXOO()&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p>
<p>class&nbsp;B&nbsp;extends&nbsp;A<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;public&nbsp;function&nbsp;funcXXOO()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;B::funcXXOO&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p>
<p>$b&nbsp;=&nbsp;new&nbsp;B;<br>$b-&amp;gt;callFuncXXOO();</pre><p>情况就没这么乐观了，输出是：</p><pre>A::funcXXOO()</pre><p>这是因为 self 的语义本来就是“当前类”，所以 PHP5.3 给 static 关键字赋予了一个新功能：后期静态绑定：</p><pre>class&nbsp;A<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;public&nbsp;function&nbsp;callFuncXXOO()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;static::funcXXOO();<br>&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>}</p>
<p>//&nbsp;...</pre><p>这样就会像预期一样输出了：</p><pre>B::funcXXOO</pre><h3>Heredoc 和 Nowdoc</h3><p>PHP5.3 对 Heredoc 以及 Nowdoc 进行了一些改进，它们都用于在 PHP 代码中嵌入大段字符串。</p><p>Heredoc 的行为类似于一个双引号字符串：</p><pre>$name&nbsp;=&nbsp;&quot;MyName&quot;;<br>echo&nbsp;&amp;lt;&amp;lt;&amp;lt;&nbsp;TEXT<br>My&nbsp;name&nbsp;is&nbsp;&quot;{$name}&quot;.<br>TEXT;</pre><p>Heredoc 以三个左尖括号开始，后面跟一个标识符(TEXT), 直到一个同样的顶格的标识符(不能缩进)结束。<br/>就像双引号字符串一样，其中可以嵌入变量。</p><p>Heredoc 还可以用于函数参数，以及类成员初始化：</p><pre>var_dump(&amp;lt;&amp;lt;&amp;lt;EOD<br>Hello&nbsp;World<br>EOD<br>);</p>
<p>class&nbsp;A<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;xx&nbsp;=&nbsp;&amp;lt;&amp;lt;&amp;lt;&nbsp;EOD<br>Hello&nbsp;World<br>EOD;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$oo&nbsp;=&nbsp;&amp;lt;&amp;lt;&amp;lt;&nbsp;EOD<br>Hello&nbsp;World<br>EOD;<br>}</pre><p>Nowdoc 的行为像一个单引号字符串，不能在其中嵌入变量，和 Heredoc 唯一的区别就是，三个左尖括号后的标识符要以单引号括起来：</p><pre>$name&nbsp;=&nbsp;&quot;MyName&quot;;<br>echo&nbsp;&amp;lt;&amp;lt;&amp;lt;&nbsp;&#39;TEXT&#39;<br>My&nbsp;name&nbsp;is&nbsp;&quot;{$name}&quot;.<br>TEXT;</pre><p>输出：</p><pre>My&nbsp;name&nbsp;is&nbsp;&quot;{$name}&quot;.</pre><h3>用 const 定义常量</h3><p>PHP5.3 起同时支持在全局命名空间和类中使用 const 定义常量。</p><p>旧式风格：</p><pre>define(&quot;XOOO&quot;,&nbsp;&quot;Value&quot;);</pre><p>新式风格：</p><pre>const&nbsp;XXOO&nbsp;=&nbsp;&quot;Value&quot;;</pre><p>const 形式仅适用于常量，不适用于运行时才能求值的表达式：</p><pre>//&nbsp;正确<br>const&nbsp;XXOO&nbsp;=&nbsp;1234;<br>//&nbsp;错误<br>const&nbsp;XXOO&nbsp;=&nbsp;2&nbsp;<em>&nbsp;617;</pre><h3>三元运算符简写形式</h3><p>旧式风格：</p><pre>echo&nbsp;$a&nbsp;?&nbsp;$a&nbsp;:&nbsp;&quot;No&nbsp;Value&quot;;</pre><p>可简写成：</p><pre>echo&nbsp;$a&nbsp;?:&nbsp;&quot;No&nbsp;Value&quot;;</pre><p>即如果省略三元运算符的第二个部分，会默认用第一个部分代替。</p><h3>Phar</h3><p>Phar即PHP Archive, 起初只是Pear中的一个库而已，后来在PHP5.3被重新编写成C扩展并内置到 PHP 中。<br/>Phar用来将多个 .php 脚本打包(也可以打包其他文件)成一个 .phar 的压缩文件(通常是ZIP格式)。<br/>目的在于模仿 Java 的 .jar, 不对，目的是为了让发布PHP应用程序更加方便。同时还提供了数字签名验证等功能。</p><p>.phar 文件可以像 .php 文件一样，被PHP引擎解释执行，同时你还可以写出这样的代码来包含(require) .phar 中的代码：</p><pre>require(&quot;xxoo.phar&quot;);<br>require(&quot;phar://xxoo.phar/xo/ox.php&quot;);</pre><p>更多信息请参见官网 [注].</p><p>注：<a rel="nofollow external" href="http://www.php.net/manual/zh/phar.using.intro.php" target="_blank">http://www.php.net/manual/zh/phar.using.intro.php</a></p><h2>PHP5.4</h2><p>(2012-2013)</p><h2>Short Open Tag</h2><p>Short Open Tag 自 PHP5.4 起总是可用。<br/>在这里集中讲一下有关 PHP 起止标签的问题。即：</p><pre>&amp;lt;?php<br>//&nbsp;Code...<br>?&amp;gt;</pre><p>通常就是上面的形式，除此之外还有一种简写形式：</p><pre>&amp;lt;?&nbsp;/</em>&nbsp;Code...&nbsp;*/&nbsp;?&amp;gt;</pre><p>还可以把</p><pre>&amp;lt;?php&nbsp;echo&nbsp;$xxoo;?&amp;gt;</pre><p>简写成：</p><pre>&amp;lt;?=&nbsp;$xxoo;?&amp;gt;</pre><p>这种简写形式被称为 Short Open Tag, 在 PHP5.3 起被默认开启，在 PHP5.4 起总是可用。<br/>使用这种简写形式在 HTML 中嵌入 PHP 变量将会非常方便。</p><p>对于纯 PHP 文件(如类实现文件), PHP 官方建议顶格写起始标记，同时 <strong>省略</strong> 结束标记。<br/>这样可以确保整个 PHP 文件都是 PHP 代码，没有任何输出，否则当你包含该文件后，设置 Header 和 Cookie 时会遇到一些麻烦 [注].</p><p>注：Header 和 Cookie 必须在输出任何内容之前被发送。</p><h3>数组简写形式</h3><p>这是非常方便的一项特征！</p><pre>//&nbsp;原来的数组写法<br>$arr&nbsp;=&nbsp;array(&quot;key&quot;&nbsp;=&amp;gt;&nbsp;&quot;value&quot;,&nbsp;&quot;key2&quot;&nbsp;=&amp;gt;&nbsp;&quot;value2&quot;);<br>//&nbsp;简写形式<br>$arr&nbsp;=&nbsp;[&quot;key&quot;&nbsp;=&amp;gt;&nbsp;&quot;value&quot;,&nbsp;&quot;key2&quot;&nbsp;=&amp;gt;&nbsp;&quot;value2&quot;];</pre><h3>Traits</h3><p>所谓Traits就是“构件”，是用来替代继承的一种机制。PHP中无法进行多重继承，但一个类可以包含多个Traits.</p><pre>//&nbsp;Traits不能被单独实例化，只能被类所包含<br>trait&nbsp;SayWorld<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;sayHello()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&#39;World!&#39;;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</p>
<p>class&nbsp;MyHelloWorld<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;将SayWorld中的成员包含进来<br>&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;SayWorld;<br>}</p>
<p>$xxoo&nbsp;=&nbsp;new&nbsp;MyHelloWorld();<br>//&nbsp;sayHello()&nbsp;函数是来自&nbsp;SayWorld&nbsp;构件的<br>$xxoo-&amp;gt;sayHello();</pre><p>Traits还有很多神奇的功能，比如包含多个Traits, 解决冲突，修改访问权限，为函数设置别名等等。<br/>Traits中也同样可以包含Traits. 篇幅有限不能逐个举例，详情参见官网 [注].</p><p>注：<a rel="nofollow external" href="http://www.php.net/manual/zh/language.oop5.traits.php" target="_blank">http://www.php.net/manual/zh/language.oop5.traits.php</a></p><h3>内置 Web 服务器</h3><p>PHP从5.4开始内置一个轻量级的Web服务器，不支持并发，定位是用于开发和调试环境。</p><p>在开发环境使用它的确非常方便。</p><pre>php&nbsp;-S&nbsp;localhost:8000</pre><p>这样就在当前目录建立起了一个Web服务器，你可以通过 <a rel="nofollow external" href="http://localhost:8000/" target="_blank">http://localhost:8000/</a> 来访问。<br/>其中localhost是监听的ip，8000是监听的端口，可以自行修改。</p><p>很多应用中，都会进行URL重写，所以PHP提供了一个设置路由脚本的功能:</p><pre>php&nbsp;-S&nbsp;localhost:8000&nbsp;index.php</pre><p>这样一来，所有的请求都会由index.php来处理。</p><p>你还可以使用 XDebug 来进行断点调试。</p><h3>细节修改</h3><p>PHP5.4 新增了动态访问静态方法的方式：</p><pre>$func&nbsp;=&nbsp;&quot;funcXXOO&quot;;<br>A::{$func}();</pre><p>新增在实例化时访问类成员的特征：</p><pre>(new&nbsp;MyClass)-&amp;gt;xxoo();</pre><p>新增支持对函数返回数组的成员访问解析(这种写法在之前版本是会报错的)：</p><pre>print&nbsp;func()[0];</pre><h2>PHP5.5</h2><p>(2013起)</p><h3>yield</h3><p>yield关键字用于当函数需要返回一个迭代器的时候, 逐个返回值。</p><pre>function&nbsp;number10()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;for($i&nbsp;=&nbsp;1;&nbsp;$i&nbsp;&amp;lt;=&nbsp;10;&nbsp;$i&nbsp;+=&nbsp;1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;$i;<br>}</pre><p>该函数的返回值是一个数组：</p><pre>[1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;7,&nbsp;8,&nbsp;9,&nbsp;10]</pre><h3>list() 用于 foreach</h3><p>可以用 list() 在 foreach 中解析嵌套的数组：</p><pre>$array&nbsp;=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;[1,&nbsp;2,&nbsp;3],<br>&nbsp;&nbsp;&nbsp;&nbsp;[4,&nbsp;5,&nbsp;6],<br>];</p>
<p>foreach&nbsp;($array&nbsp;as&nbsp;list($a,&nbsp;$b,&nbsp;$c))<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;{$a}&nbsp;{$b}&nbsp;{$c}<br>&quot;;</pre><p>结果：</p><h3>细节修改</h3><p>不推荐使用 mysql 函数，推荐使用 PDO 或 MySQLi, 参见前文。<br/>不再支持Windows XP.</p><p>可用 MyClass::class 取到一个类的完整限定名(包括命名空间)。</p><p>empty() 支持表达式作为参数。</p><p>try-catch 结构新增 finally 块。</p><h2>PHP5.6</h2><h3>更好的常量</h3><p>定义常量时允许使用之前定义的常量进行计算：</p><pre>const&nbsp;A&nbsp;=&nbsp;2;<br>const&nbsp;B&nbsp;=&nbsp;A&nbsp;+&nbsp;1;</p>
<p>class&nbsp;C<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;STR&nbsp;=&nbsp;&quot;hello&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;STR2&nbsp;=&nbsp;self::STR&nbsp;+&nbsp;&quot;,&nbsp;world&quot;;<br>}</pre><p>允许常量作为函数参数默认值：</p><pre>function&nbsp;func($arg&nbsp;=&nbsp;C::STR2)</pre><h3>更好的可变函数参数</h3><p>用于代替 func_get_args()</p><pre>function&nbsp;add(...$args)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach($args&nbsp;as&nbsp;$arg)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;+=&nbsp;$arg;<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;<br>}</pre><p>同时可以在调用函数时，把数组展开为函数参数：</p><pre>$arr&nbsp;=&nbsp;[2,&nbsp;3];<br>add(1,&nbsp;...$arr);<br>//&nbsp;结果为&nbsp;6</pre><h3>命名空间</h3><p>命名空间支持常量和函数：</p><pre>namespace&nbsp;Name\Space&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;FOO&nbsp;=&nbsp;42;<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;f()&nbsp;{&nbsp;echo&nbsp;<strong>FUNCTION</strong>.&quot;<br>&quot;;&nbsp;}<br>}</p>
<p>namespace&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;const&nbsp;Name\Space\FOO;<br>&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;function&nbsp;Name\Space;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;FOO.&quot;<br>&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;f();<br>}</pre><p><br/></p><p><br/></p><p>转载自：<a href="http://www.4u4v.net/php-5-25-35-45-55-6-contrast-difference-and-the-new-version-features-detailed.html" target="_blank" rel="noopener">http://www.4u4v.net/php-5-25-35-45-55-6-contrast-difference-and-the-new-version-features-detailed.html</a></p></p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/php/">php    </a></div><div class="post_share"><div class="social-share" data-image="/upload/article/14919848041.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="http://image.13sai.com/zan.jpg"><div class="post-qr-code__desc">微信</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2017/04/13/119/"><img class="prev_cover lazyload" data-src="/upload/article/14920963791.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>wamp一直橙色，而80端口又未被占用</span></div></a></div><div class="next-post pull_right"><a href="/2017/04/05/117/"><img class="next_cover lazyload" data-src="/upload/article/14913720581.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>mouseover,mouseout,mouseenter,mouseleave的区别</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2018/05/09/154/" title="ArrayAccess（数组式访问）接口"><img class="relatedPosts_cover lazyload"data-src="/upload/article/15258559411.jpg"><div class="relatedPosts_title">ArrayAccess（数组式访问）接口</div></a></div><div class="relatedPosts_item"><a href="/2019/07/04/191/" title="Laravel管理日志"><img class="relatedPosts_cover lazyload"data-src="http://img.13sai.com/1562225140000.png"><div class="relatedPosts_title">Laravel管理日志</div></a></div><div class="relatedPosts_item"><a href="/2018/06/13/161/" title="PHP两个好用的函数处理函数"><img class="relatedPosts_cover lazyload"data-src="/upload/article/15288754101.jpg"><div class="relatedPosts_title">PHP两个好用的函数处理函数</div></a></div><div class="relatedPosts_item"><a href="/2016/06/22/53/" title="PHP中获取当前页面的完整URL"><img class="relatedPosts_cover lazyload"data-src="/ui/assets/i/f10.jpg"><div class="relatedPosts_title">PHP中获取当前页面的完整URL</div></a></div><div class="relatedPosts_item"><a href="/2016/09/02/66/" title="PHP的数据类型转换"><img class="relatedPosts_cover lazyload"data-src="/ui/assets/i/f20.jpg"><div class="relatedPosts_title">PHP的数据类型转换</div></a></div><div class="relatedPosts_item"><a href="/2017/09/15/132/" title="PHP操作MySQL事务实例"><img class="relatedPosts_cover lazyload"data-src="/upload/article/15054655621.png"><div class="relatedPosts_title">PHP操作MySQL事务实例</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2014 - 2019 By 13sai</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a><img class="icp-icon" src="/img/icp.png"><span>皖ICP备14021992号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script></body></html>