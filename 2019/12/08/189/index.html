<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>docker安装gogs | 13sai blog</title><meta name="description" content="docker安装gogs"><meta name="keywords" content="docker,CI"><meta name="author" content="13sai"><meta name="copyright" content="13sai"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="docker安装gogs"><meta name="twitter:description" content="docker安装gogs"><meta name="twitter:image" content="http://github.13sai.com/img/gogs.jpg"><meta property="og:type" content="article"><meta property="og:title" content="docker安装gogs"><meta property="og:url" content="http://github.13sai.com/2019/12/08/189/"><meta property="og:site_name" content="13sai blog"><meta property="og:description" content="docker安装gogs"><meta property="og:image" content="http://github.13sai.com/img/gogs.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://github.13sai.com/2019/12/08/189/"><link rel="prev" title="gRPC初体验" href="http://github.13sai.com/2019/12/20/190/"><link rel="next" title="利用consul+nginx-upsync实现动态负载" href="http://github.13sai.com/2019/12/01/212/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">13sai blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 分类</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/nginx/"><i class="fa-fw"></i><span> Nginx</span></a></li><li><a class="site-page" href="/categories/mysql/"><i class="fa-fw"></i><span> Mysql</span></a></li><li><a class="site-page" href="/categories/php/"><i class="fa-fw"></i><span> PHP</span></a></li><li><a class="site-page" href="/categories/redis/"><i class="fa-fw"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 书签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="http://image.13sai.com/sai.jpg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">149</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">34</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">24</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 分类</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/nginx/"><i class="fa-fw"></i><span> Nginx</span></a></li><li><a class="site-page" href="/categories/mysql/"><i class="fa-fw"></i><span> Mysql</span></a></li><li><a class="site-page" href="/categories/php/"><i class="fa-fw"></i><span> PHP</span></a></li><li><a class="site-page" href="/categories/redis/"><i class="fa-fw"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 书签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#详细配置文件手册（来自github）"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">详细配置文件手册（来自github）</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#概览"><span class="toc_mobile_items-number">1.0.1.</span> <span class="toc_mobile_items-text">概览</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#服务器-server"><span class="toc_mobile_items-number">1.0.2.</span> <span class="toc_mobile_items-text">服务器 (server)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#仓库-repository"><span class="toc_mobile_items-number">1.0.3.</span> <span class="toc_mobile_items-text">仓库 (repository)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#仓库-编辑器-repository-editor"><span class="toc_mobile_items-number">1.0.3.1.</span> <span class="toc_mobile_items-text">仓库 - 编辑器 (repository.editor)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#仓库-文件上传-repository-upload"><span class="toc_mobile_items-number">1.0.3.2.</span> <span class="toc_mobile_items-text">仓库 - 文件上传 (repository.upload)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#版本发布-附件-release-attachment"><span class="toc_mobile_items-number">1.0.3.3.</span> <span class="toc_mobile_items-text">版本发布 - 附件 (release.attachment)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Markdown-markdown"><span class="toc_mobile_items-number">1.0.4.</span> <span class="toc_mobile_items-text">Markdown (markdown)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Smartypants-smartypants"><span class="toc_mobile_items-number">1.0.5.</span> <span class="toc_mobile_items-text">Smartypants (smartypants)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#HTTP-http"><span class="toc_mobile_items-number">1.0.6.</span> <span class="toc_mobile_items-text">HTTP (http)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#数据库-database"><span class="toc_mobile_items-number">1.0.7.</span> <span class="toc_mobile_items-text">数据库 (database)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#应用管理-admin"><span class="toc_mobile_items-number">1.0.8.</span> <span class="toc_mobile_items-text">应用管理 (admin)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#安全-security"><span class="toc_mobile_items-number">1.0.9.</span> <span class="toc_mobile_items-text">安全 (security)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#服务-service"><span class="toc_mobile_items-number">1.0.10.</span> <span class="toc_mobile_items-text">服务 (service)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Web-钩子-webhook"><span class="toc_mobile_items-number">1.0.11.</span> <span class="toc_mobile_items-text">Web 钩子 (webhook)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#邮件-mailer"><span class="toc_mobile_items-number">1.0.12.</span> <span class="toc_mobile_items-text">邮件 (mailer)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#缓存-cache"><span class="toc_mobile_items-number">1.0.13.</span> <span class="toc_mobile_items-text">缓存 (cache)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#会话-session"><span class="toc_mobile_items-number">1.0.14.</span> <span class="toc_mobile_items-text">会话 (session)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#图片-picture"><span class="toc_mobile_items-number">1.0.15.</span> <span class="toc_mobile_items-text">图片 (picture)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#附件-attachment"><span class="toc_mobile_items-number">1.0.16.</span> <span class="toc_mobile_items-text">附件 (attachment)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#时间-time"><span class="toc_mobile_items-number">1.0.17.</span> <span class="toc_mobile_items-text">时间 (time)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#日志-log"><span class="toc_mobile_items-number">1.0.18.</span> <span class="toc_mobile_items-text">日志 (log)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#日志-控制台-log-console"><span class="toc_mobile_items-number">1.0.18.1.</span> <span class="toc_mobile_items-text">日志 - 控制台 (log.console)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#日志-文件-log-file"><span class="toc_mobile_items-number">1.0.18.2.</span> <span class="toc_mobile_items-text">日志 - 文件 (log.file)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#日志-Slack-log-slack"><span class="toc_mobile_items-number">1.0.18.3.</span> <span class="toc_mobile_items-text">日志 - Slack (log.slack)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#日志-Discord-log-discord"><span class="toc_mobile_items-number">1.0.18.4.</span> <span class="toc_mobile_items-text">日志 - Discord (log.discord)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Cron-cron"><span class="toc_mobile_items-number">1.0.19.</span> <span class="toc_mobile_items-text">Cron (cron)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Cron-更新镜像-cron-update-mirrors"><span class="toc_mobile_items-number">1.0.19.1.</span> <span class="toc_mobile_items-text">Cron - 更新镜像 (cron.update_mirrors)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Cron-仓库健康检查-cron-repo-health-check"><span class="toc_mobile_items-number">1.0.19.2.</span> <span class="toc_mobile_items-text">Cron - 仓库健康检查 (cron.repo_health_check)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Cron-仓库统计检查-cron-check-repo-stats"><span class="toc_mobile_items-number">1.0.19.3.</span> <span class="toc_mobile_items-text">Cron - 仓库统计检查 (cron.check_repo_stats)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Cron-仓库归档清理-cron-repo-archive-cleanup"><span class="toc_mobile_items-number">1.0.19.4.</span> <span class="toc_mobile_items-text">Cron - 仓库归档清理 (cron.repo_archive_cleanup)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Git-git"><span class="toc_mobile_items-number">1.0.20.</span> <span class="toc_mobile_items-text">Git (git)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Git-超时-git-timeout"><span class="toc_mobile_items-number">1.0.20.1.</span> <span class="toc_mobile_items-text">Git - 超时 (git.timeout)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#UI-ui"><span class="toc_mobile_items-number">1.0.21.</span> <span class="toc_mobile_items-text">UI (ui)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#UI-Admin-ui-admin"><span class="toc_mobile_items-number">1.0.21.1.</span> <span class="toc_mobile_items-text">UI - Admin (ui.admin)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Prometheus-prometheus"><span class="toc_mobile_items-number">1.0.21.2.</span> <span class="toc_mobile_items-text">Prometheus (prometheus)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#其他-other"><span class="toc_mobile_items-number">1.0.22.</span> <span class="toc_mobile_items-text">其他 (other)</span></a></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#详细配置文件手册（来自github）"><span class="toc-number">1.</span> <span class="toc-text">详细配置文件手册（来自github）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概览"><span class="toc-number">1.0.1.</span> <span class="toc-text">概览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务器-server"><span class="toc-number">1.0.2.</span> <span class="toc-text">服务器 (server)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#仓库-repository"><span class="toc-number">1.0.3.</span> <span class="toc-text">仓库 (repository)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#仓库-编辑器-repository-editor"><span class="toc-number">1.0.3.1.</span> <span class="toc-text">仓库 - 编辑器 (repository.editor)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#仓库-文件上传-repository-upload"><span class="toc-number">1.0.3.2.</span> <span class="toc-text">仓库 - 文件上传 (repository.upload)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#版本发布-附件-release-attachment"><span class="toc-number">1.0.3.3.</span> <span class="toc-text">版本发布 - 附件 (release.attachment)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Markdown-markdown"><span class="toc-number">1.0.4.</span> <span class="toc-text">Markdown (markdown)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Smartypants-smartypants"><span class="toc-number">1.0.5.</span> <span class="toc-text">Smartypants (smartypants)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-http"><span class="toc-number">1.0.6.</span> <span class="toc-text">HTTP (http)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库-database"><span class="toc-number">1.0.7.</span> <span class="toc-text">数据库 (database)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用管理-admin"><span class="toc-number">1.0.8.</span> <span class="toc-text">应用管理 (admin)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安全-security"><span class="toc-number">1.0.9.</span> <span class="toc-text">安全 (security)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务-service"><span class="toc-number">1.0.10.</span> <span class="toc-text">服务 (service)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web-钩子-webhook"><span class="toc-number">1.0.11.</span> <span class="toc-text">Web 钩子 (webhook)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#邮件-mailer"><span class="toc-number">1.0.12.</span> <span class="toc-text">邮件 (mailer)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存-cache"><span class="toc-number">1.0.13.</span> <span class="toc-text">缓存 (cache)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#会话-session"><span class="toc-number">1.0.14.</span> <span class="toc-text">会话 (session)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#图片-picture"><span class="toc-number">1.0.15.</span> <span class="toc-text">图片 (picture)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#附件-attachment"><span class="toc-number">1.0.16.</span> <span class="toc-text">附件 (attachment)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#时间-time"><span class="toc-number">1.0.17.</span> <span class="toc-text">时间 (time)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#日志-log"><span class="toc-number">1.0.18.</span> <span class="toc-text">日志 (log)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#日志-控制台-log-console"><span class="toc-number">1.0.18.1.</span> <span class="toc-text">日志 - 控制台 (log.console)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#日志-文件-log-file"><span class="toc-number">1.0.18.2.</span> <span class="toc-text">日志 - 文件 (log.file)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#日志-Slack-log-slack"><span class="toc-number">1.0.18.3.</span> <span class="toc-text">日志 - Slack (log.slack)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#日志-Discord-log-discord"><span class="toc-number">1.0.18.4.</span> <span class="toc-text">日志 - Discord (log.discord)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cron-cron"><span class="toc-number">1.0.19.</span> <span class="toc-text">Cron (cron)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Cron-更新镜像-cron-update-mirrors"><span class="toc-number">1.0.19.1.</span> <span class="toc-text">Cron - 更新镜像 (cron.update_mirrors)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cron-仓库健康检查-cron-repo-health-check"><span class="toc-number">1.0.19.2.</span> <span class="toc-text">Cron - 仓库健康检查 (cron.repo_health_check)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cron-仓库统计检查-cron-check-repo-stats"><span class="toc-number">1.0.19.3.</span> <span class="toc-text">Cron - 仓库统计检查 (cron.check_repo_stats)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cron-仓库归档清理-cron-repo-archive-cleanup"><span class="toc-number">1.0.19.4.</span> <span class="toc-text">Cron - 仓库归档清理 (cron.repo_archive_cleanup)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-git"><span class="toc-number">1.0.20.</span> <span class="toc-text">Git (git)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Git-超时-git-timeout"><span class="toc-number">1.0.20.1.</span> <span class="toc-text">Git - 超时 (git.timeout)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UI-ui"><span class="toc-number">1.0.21.</span> <span class="toc-text">UI (ui)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#UI-Admin-ui-admin"><span class="toc-number">1.0.21.1.</span> <span class="toc-text">UI - Admin (ui.admin)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Prometheus-prometheus"><span class="toc-number">1.0.21.2.</span> <span class="toc-text">Prometheus (prometheus)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他-other"><span class="toc-number">1.0.22.</span> <span class="toc-text">其他 (other)</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/gogs.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">docker安装gogs</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-12-08<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-12-08</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/ci/">ci</a></span><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><blockquote>
<p>docker pull gogs/gogs</p>
</blockquote>
<blockquote>
<p>docker run -itd –name=gogs1 -p 10022:22 -p 10023:3000  gogs/gogs</p>
</blockquote>
<p>浏览器输入<a href="http://127.0.0.1:10023/" target="_blank" rel="noopener">http://127.0.0.1:10023/</a></p>
<p><img alt="面板" data-src="/img/gogs-install.jpg" class="lazyload"></p>
<p>主要修改的参数是</p>
<ul>
<li>应用 URL</li>
<li>数据库用户密码</li>
<li>管理员信息</li>
</ul>
<p>如果你有其他修改，自行修改即可。</p>
<p>点击立即安装按钮，按理说会跳到3000端口地址，你换成10023就好了。</p>
<p><img alt="登录" data-src="/img/gogs-login.jpg" class="lazyload"></p>
<p>然后你就可以自行创建，开始gogs之旅了。</p>
<p><img alt="project" data-src="/img/gogs-project" class="lazyload"></p>
<blockquote>
<p>另外，配置文件在容器的/data/gogs/conf/app.ini。</p>
</blockquote>
<h1 id="详细配置文件手册（来自github）"><a href="#详细配置文件手册（来自github）" class="headerlink" title="详细配置文件手册（来自github）"></a>详细配置文件手册（来自github）</h1><h3 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>APP_NAME</code></td>
<td>应用名称，可以改成您的组织或公司名称</td>
</tr>
<tr>
<td><code>RUN_USER</code></td>
<td>运行应用的用户名称，我们建议您使用 <code>git</code>，但如果您在个人计算机上运行 Gogs，请修改为您的系统用户名称。如果没有正确设置这个值，很可能导致您的应用崩溃</td>
</tr>
<tr>
<td><code>RUN_MODE</code></td>
<td>鉴于性能和其它考虑，建议在部署环境下修改为 <code>prod</code> 模式。在您完成安装操作时，该值也会被设置为 <code>prod</code></td>
</tr>
</tbody></table>
<h3 id="服务器-server"><a href="#服务器-server" class="headerlink" title="服务器 (server)"></a>服务器 (<code>server</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>PROTOCOL</code></td>
<td><code>http</code> 或 <code>https</code></td>
</tr>
<tr>
<td><code>DOMAIN</code></td>
<td>服务器域名</td>
</tr>
<tr>
<td><code>ROOT_URL</code></td>
<td>公开的完整 URL 路径</td>
</tr>
<tr>
<td><code>HTTP_ADDR</code></td>
<td>应用 HTTP 监听地址</td>
</tr>
<tr>
<td><code>HTTP_PORT</code></td>
<td>应用 HTTP 监听端口号</td>
</tr>
<tr>
<td><code>UNIX_SOCKET_PERMISSION</code></td>
<td>Unix 套接字文件的权限</td>
</tr>
<tr>
<td><code>LOCAL_ROOT_URL</code></td>
<td>用于 Gogs 工作进程（如：SSH）回访应用的本地（DMZ）URL，一般情况下请保持默认值，除非您的 SSH 服务器节点与 HTTP 并不是同一个节点入口</td>
</tr>
<tr>
<td><code>DISABLE_SSH</code></td>
<td>当 SSH 功能不可用时可以禁用</td>
</tr>
<tr>
<td><code>START_SSH_SERVER</code></td>
<td>启用该选项来启动内置 SSH 服务器</td>
</tr>
<tr>
<td><code>SSH_DOMAIN</code></td>
<td>允许公用网络访问 SSH 的域名</td>
</tr>
<tr>
<td><code>SSH_PORT</code></td>
<td>SSH 端口号，如果不为 <code>22</code> 的话可以在此修改</td>
</tr>
<tr>
<td><code>SSH_LISTEN_HOST</code></td>
<td>内置 SSH 服务器监听的地址</td>
</tr>
<tr>
<td><code>SSH_LISTEN_PORT</code></td>
<td>内置 SSH 服务器监听的端口</td>
</tr>
<tr>
<td><code>SSH_ROOT_PATH</code></td>
<td>SSH 根目录，一般为 <code>~/.ssh</code>，但必须填写为 <code>/home/git/.ssh</code></td>
</tr>
<tr>
<td><code>REWRITE_AUTHORIZED_KEYS_AT_START</code></td>
<td>激活该选项以在应用启动时自动重写 <code>authorized_keys</code> 文件，该选项在使用内置 SSH 服务器时将会被自动禁用</td>
</tr>
<tr>
<td><code>SSH_KEY_TEST_PATH</code></td>
<td>用于测试 SSH 公钥的临时目录</td>
</tr>
<tr>
<td><code>SSH_KEYGEN_PATH</code></td>
<td><code>ssh-keygen</code> 程序的路径，默认为 <code>ssh-keygen</code> 即通过系统路径查找</td>
</tr>
<tr>
<td><code>MINIMUM_KEY_SIZE_CHECK</code></td>
<td>指定不同类型的公钥的最小密钥大小</td>
</tr>
<tr>
<td><code>OFFLINE_MODE</code></td>
<td>激活该选项来禁止从 CDN 获取静态资源，同时 Gravatar 服务也将被自动禁用</td>
</tr>
<tr>
<td><code>DISABLE_ROUTER_LOG</code></td>
<td>激活该选项来禁止打印路由日志</td>
</tr>
<tr>
<td><code>CERT_FILE</code></td>
<td>HTTPS 授权文件路径</td>
</tr>
<tr>
<td><code>KEY_FILE</code></td>
<td>HTTPS 的密钥文件路径</td>
</tr>
<tr>
<td><code>STATIC_ROOT_PATH</code></td>
<td>模板文件和静态文件的上级目录，默认为应用二进制所在的位置</td>
</tr>
<tr>
<td><code>APP_DATA_PATH</code></td>
<td>应用内部数据的存放目录</td>
</tr>
<tr>
<td><code>ENABLE_GZIP</code></td>
<td>激活该选项来启用应用级别 GZIP 支持</td>
</tr>
<tr>
<td><code>LANDING_PAGE</code></td>
<td>未登录用户的默认首页，可以是 <code>home</code> 或 <code>explore</code>（探索页）</td>
</tr>
</tbody></table>
<h3 id="仓库-repository"><a href="#仓库-repository" class="headerlink" title="仓库 (repository)"></a>仓库 (<code>repository</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ROOT</code></td>
<td>用户仓库存储根目录，必须为绝对路径，默认为 <code>~/&lt;user name&gt;/gogs-repositories</code></td>
</tr>
<tr>
<td><code>SCRIPT_TYPE</code></td>
<td>系统脚本类型，一般情况下均为 <code>bash</code>，但有些用户反应只能使用 <code>sh</code></td>
</tr>
<tr>
<td><code>ANSI_CHARSET</code></td>
<td>当遇到无法识别的字符集时使用的默认字符集</td>
</tr>
<tr>
<td><code>FORCE_PRIVATE</code></td>
<td>强制要求所有新建的仓库都是私有的</td>
</tr>
<tr>
<td><code>MAX_CREATION_LIMIT</code></td>
<td>全局默认的每个用户可创建创建仓库上限，<code>-1</code> 表示无限制</td>
</tr>
<tr>
<td><code>PREFERRED_LICENSES</code></td>
<td>建议用户首选的授权类型</td>
</tr>
<tr>
<td><code>DISABLE_HTTP_GIT</code></td>
<td>激活该选项来禁止用户通过 HTTP 对 Git 仓库进行交互操作，即用户只能通过 SSH 操作</td>
</tr>
<tr>
<td><code>ENABLE_LOCAL_PATH_MIGRATION</code></td>
<td>激活该选项来启用本地路径迁移仓库功能。启动后默认只有管理员可以使用，普通用户必须经由管理员授权</td>
</tr>
<tr>
<td><code>ENABLE_RAW_FILE_RENDER_MODE</code></td>
<td>激活该选项来启用在查看原始数据时对页面进行真实渲染，例如渲染实际的 HTML 页面，有潜在安全隐患</td>
</tr>
</tbody></table>
<h4 id="仓库-编辑器-repository-editor"><a href="#仓库-编辑器-repository-editor" class="headerlink" title="仓库 - 编辑器 (repository.editor)"></a>仓库 - 编辑器 (<code>repository.editor</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>LINE_WRAP_EXTENSIONS</code></td>
<td>需要显示为行包装的文件名后缀，通过逗号分隔。如果是无后缀名的文件，则单独放置一个逗号，例如：<code>.txt,</code></td>
</tr>
</tbody></table>
<h4 id="仓库-文件上传-repository-upload"><a href="#仓库-文件上传-repository-upload" class="headerlink" title="仓库 - 文件上传 (repository.upload)"></a>仓库 - 文件上传 (<code>repository.upload</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLED</code></td>
<td>激活该选项来启用仓库文件上传功能</td>
</tr>
<tr>
<td><code>TEMP_PATH</code></td>
<td>文件上传的临时存放目录</td>
</tr>
<tr>
<td><code>ALLOWED_TYPES</code></td>
<td>允许上传的文件类型（例如：”image/jpeg|image/png”），留空表示允许上传任意类型的文件</td>
</tr>
<tr>
<td><code>FILE_MAX_SIZE</code></td>
<td>单个上传的文件的最大体积，以 MB 为单位</td>
</tr>
<tr>
<td><code>MAX_FILES</code></td>
<td>单次同时上传的最多文件个数</td>
</tr>
</tbody></table>
<h4 id="版本发布-附件-release-attachment"><a href="#版本发布-附件-release-attachment" class="headerlink" title="版本发布 - 附件 (release.attachment)"></a>版本发布 - 附件 (<code>release.attachment</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLED</code></td>
<td>激活该选项来启用版本发布附件功能</td>
</tr>
<tr>
<td><code>PATH</code></td>
<td>存放附件的路径</td>
</tr>
<tr>
<td><code>ALLOWED_TYPES</code></td>
<td>允许上传的 MIME 类型，例如 “image/jpeg|image/png”，使用 <code>*/*</code> 允许所有类型的文件</td>
</tr>
<tr>
<td><code>MAX_SIZE</code></td>
<td>最大允许上传的附件体积，单位为 MB，例如 <code>32</code></td>
</tr>
<tr>
<td><code>MAX_FILES</code></td>
<td>最大允许一次性上传的附件个数，例如 <code>10</code></td>
</tr>
</tbody></table>
<h3 id="Markdown-markdown"><a href="#Markdown-markdown" class="headerlink" title="Markdown (markdown)"></a>Markdown (<code>markdown</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLE_HARD_LINE_BREAK</code></td>
<td>指示是否启用硬性换行扩展</td>
</tr>
<tr>
<td><code>CUSTOM_URL_SCHEMES</code></td>
<td>允许被解析为链接的自定义 URL 方案，例如 <code>git</code>（用于 <code>git://</code>）和<code>magnet</code>（用于 <code>magnet://</code>）</td>
</tr>
<tr>
<td><code>FILE_EXTENSIONS</code></td>
<td>需要被渲染为 Markdown 格式的文件名后缀，通过逗号分隔。如果是无后缀名的文件，则单独放置一个逗号，例如：<code>.markdown,</code></td>
</tr>
</tbody></table>
<h3 id="Smartypants-smartypants"><a href="#Smartypants-smartypants" class="headerlink" title="Smartypants (smartypants)"></a>Smartypants (<code>smartypants</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLED</code></td>
<td>指示是否启用 Smartypants 扩展</td>
</tr>
</tbody></table>
<h3 id="HTTP-http"><a href="#HTTP-http" class="headerlink" title="HTTP (http)"></a>HTTP (<code>http</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ACCESS_CONTROL_ALLOW_ORIGIN</code></td>
<td>头信息 <code>Access-Control-Allow-Origin</code> 的自定义值，默认为空，即不响应此头信息</td>
</tr>
</tbody></table>
<h3 id="数据库-database"><a href="#数据库-database" class="headerlink" title="数据库 (database)"></a>数据库 (<code>database</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>DB_TYPE</code></td>
<td>数据库类型，可以是 <code>mysql</code>、<code>postgres</code>、<code>mssql</code> 或 <code>sqlite3</code></td>
</tr>
<tr>
<td><code>HOST</code></td>
<td>数据库主机地址与端口</td>
</tr>
<tr>
<td><code>NAME</code></td>
<td>数据库名称</td>
</tr>
<tr>
<td><code>USER</code></td>
<td>数据库用户名</td>
</tr>
<tr>
<td><code>PASSWD</code></td>
<td>数据库用户密码</td>
</tr>
<tr>
<td><code>SSL_MODE</code></td>
<td>仅限 PostgreSQL 使用</td>
</tr>
<tr>
<td><code>PATH</code></td>
<td>仅限 SQLite3 使用，数据库文件路径</td>
</tr>
</tbody></table>
<h3 id="应用管理-admin"><a href="#应用管理-admin" class="headerlink" title="应用管理 (admin)"></a>应用管理 (<code>admin</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>DISABLE_REGULAR_ORG_CREATION</code></td>
<td>激活该选项来禁止普通用户（非管理员）创建组织</td>
</tr>
</tbody></table>
<h3 id="安全-security"><a href="#安全-security" class="headerlink" title="安全 (security)"></a>安全 (<code>security</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>INSTALL_LOCK</code></td>
<td>用于指示是否允许访问安装页面（该页面可以设置管理员帐号，因此该选项非常重要）</td>
</tr>
<tr>
<td><code>SECRET_KEY</code></td>
<td>全局的加密密钥，<strong>务必修改该值以确保您的服务器安全</strong>（会在每次安装时自动生成随机字符串）</td>
</tr>
<tr>
<td><code>LOGIN_REMEMBER_DAYS</code></td>
<td>记住登录的天数</td>
</tr>
<tr>
<td><code>COOKIE_USERNAME</code></td>
<td>记录用户名的 Cookie 名称</td>
</tr>
<tr>
<td><code>COOKIE_REMEMBER_NAME</code></td>
<td>记录用户自动登录信息的 Cookie 名称</td>
</tr>
<tr>
<td><code>REVERSE_PROXY_AUTHENTICATION_USER</code></td>
<td>反向代理认证用户的 Header 字段名</td>
</tr>
</tbody></table>
<h3 id="服务-service"><a href="#服务-service" class="headerlink" title="服务 (service)"></a>服务 (<code>service</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ACTIVE_CODE_LIVE_MINUTES</code></td>
<td>激活码的有效期，单位为分钟</td>
</tr>
<tr>
<td><code>RESET_PASSWD_CODE_LIVE_MINUTES</code></td>
<td>重置密码的有效期，单位为分钟</td>
</tr>
<tr>
<td><code>REGISTER_EMAIL_CONFIRM</code></td>
<td>激活该选项来要求注册用户必须验证邮箱，要求已启用 <code>Mailer</code></td>
</tr>
<tr>
<td><code>DISABLE_REGISTRATION</code></td>
<td>激活该选项来禁止用户注册功能，只能由管理员创建帐号</td>
</tr>
<tr>
<td><code>SHOW_REGISTRATION_BUTTON</code></td>
<td>用于指示是否显示注册按钮</td>
</tr>
<tr>
<td><code>REQUIRE_SIGNIN_VIEW</code></td>
<td>激活该选项来要求用户必须登录才能浏览任何页面</td>
</tr>
<tr>
<td><code>ENABLE_CACHE_AVATAR</code></td>
<td>激活该选项来缓存 Gravatar 的头像</td>
</tr>
<tr>
<td><code>ENABLE_NOTIFY_MAIL</code></td>
<td>激活该选项来发送通知邮件给关注者，例如创建 issue 时，要求已启用 <code>Mailer</code></td>
</tr>
<tr>
<td><code>ENABLE_REVERSE_PROXY_AUTHENTICATION</code></td>
<td>激活该选项来开启反向代理用户认证，请从 <a href="https://github.com/gogs/gogs/issues/165" target="_blank" rel="noopener">#165</a> 了解更多信息</td>
</tr>
<tr>
<td><code>ENABLE_REVERSE_PROXY_AUTO_REGISTRATION</code></td>
<td>激活该选项来开启反向代理用户认证的自动注册功能</td>
</tr>
<tr>
<td><code>DISABLE_MINIMUM_KEY_SIZE_CHECK</code></td>
<td>激活该选项来禁止检查响应类型的密钥最小长度</td>
</tr>
<tr>
<td><code>ENABLE_CAPTCHA</code></td>
<td>激活该选项以在用户注册时要求输入验证码</td>
</tr>
</tbody></table>
<h3 id="Web-钩子-webhook"><a href="#Web-钩子-webhook" class="headerlink" title="Web 钩子 (webhook)"></a>Web 钩子 (<code>webhook</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>TYPES</code></td>
<td>启动的 Web 钩子类型，可以是 <code>gogs</code>、<code>slack</code>、<code>discord</code>或<code>dingtalk</code></td>
</tr>
<tr>
<td><code>QUEUE_LENGTH</code></td>
<td>Web钩子队列长度，如果发现部分Webhook未能成功触发，可考虑增加该值</td>
</tr>
<tr>
<td><code>DELIVER_TIMEOUT</code></td>
<td>发送通知的超时时间，以秒为单位</td>
</tr>
<tr>
<td><code>SKIP_TLS_VERIFY</code></td>
<td>指示是否允许向具有非信任证书的地址发送通知</td>
</tr>
<tr>
<td><code>PAGING_NUM</code></td>
<td>Web 钩子历史页面每页显示记录条数</td>
</tr>
</tbody></table>
<h3 id="邮件-mailer"><a href="#邮件-mailer" class="headerlink" title="邮件 (mailer)"></a>邮件 (<code>mailer</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLED</code></td>
<td>启用该选项以激活邮件服务</td>
</tr>
<tr>
<td><code>SUBJECT_PREFIX</code></td>
<td>邮件标题的前缀</td>
</tr>
<tr>
<td><code>HOST</code></td>
<td>SMTP 主机地址与端口</td>
</tr>
<tr>
<td><code>DISABLE_HELO</code></td>
<td>禁用 HELO 操作</td>
</tr>
<tr>
<td><code>HELO_HOSTNAME</code></td>
<td>HELO 操作的自定义主机名</td>
</tr>
<tr>
<td><code>SKIP_VERIFY</code></td>
<td>不验证自签发证书的有效性</td>
</tr>
<tr>
<td><code>FROM</code></td>
<td>邮箱的来自地址，遵循 RFC 5322规范，可以是一个单纯的邮箱地址或者 <code>&quot;名字&quot; &lt;email@example.com&gt;</code> 的形式</td>
</tr>
<tr>
<td><code>USER</code></td>
<td>邮箱用户名</td>
</tr>
<tr>
<td><code>PASSWD</code></td>
<td>邮箱密码</td>
</tr>
<tr>
<td><code>USE_PLAIN_TEXT</code></td>
<td>使用 <code>text/plain</code> 作为邮件内容格式</td>
</tr>
</tbody></table>
<p>备注：Gogs 仅支持使用 STARTTLS 的 SMTP 协议</p>
<h3 id="缓存-cache"><a href="#缓存-cache" class="headerlink" title="缓存 (cache)"></a>缓存 (<code>cache</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ADAPTER</code></td>
<td>缓存引擎适配器，可以为 <code>memory</code>、<code>redis</code> 或 <code>memcache</code>。如果您使用 <code>redis</code> 或 <code>memcache</code>，请确保使用 <code>-tags</code> 选项重新构建所有依赖，例如：<code>go build -tags=&#39;redis&#39;</code></td>
</tr>
<tr>
<td><code>INTERVAL</code></td>
<td>仅限内存缓存使用，GC 周期，单位为秒</td>
</tr>
<tr>
<td><code>HOST</code></td>
<td>仅限 redis 和 memcache 使用，主机地址和端口号</td>
</tr>
<tr>
<td>-</td>
<td>Redis：<code>network=tcp,addr=127.0.0.1:6379,password=macaron,db=0,pool_size=100,idle_timeout=180</code></td>
</tr>
<tr>
<td>-</td>
<td>Memache：<code>127.0.0.1:9090;127.0.0.1:9091</code></td>
</tr>
</tbody></table>
<h3 id="会话-session"><a href="#会话-session" class="headerlink" title="会话 (session)"></a>会话 (<code>session</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>PROVIDER</code></td>
<td>Session 引擎提供者，可以是 <code>memory</code>、<code>file</code>、<code>redis</code> 或 <code>mysql</code></td>
</tr>
<tr>
<td><code>PROVIDER_CONFIG</code></td>
<td>如果提供者为 file，则为文件根目录；如果为其它提供者，则为主机地址和端口号</td>
</tr>
<tr>
<td><code>COOKIE_SECURE</code></td>
<td>激活该选项以要求所有 session 操作均通过 HTTPS</td>
</tr>
<tr>
<td><code>GC_INTERVAL_TIME</code></td>
<td>GC 周期，单位为秒</td>
</tr>
</tbody></table>
<h3 id="图片-picture"><a href="#图片-picture" class="headerlink" title="图片 (picture)"></a>图片 (<code>picture</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>AVATAR_UPLOAD_PATH</code></td>
<td>存放用户上传头像的目录</td>
</tr>
<tr>
<td><code>GRAVATAR_SOURCE</code></td>
<td>可以是 <code>gravatar</code>、<code>duoshuo</code> 或任何 URL，例如：<code>http://cn.gravatar.com/avatar/</code></td>
</tr>
<tr>
<td><code>DISABLE_GRAVATAR</code></td>
<td>激活该选项来仅使用本地头像</td>
</tr>
<tr>
<td><code>ENABLE_FEDERATED_AVATAR</code></td>
<td>激活该选项来启用 Federated 头像服务（<a href="http://www.libravatar.org），当" target="_blank" rel="noopener">http://www.libravatar.org），当</a> Gravatar 被禁用时此选项无法生效</td>
</tr>
</tbody></table>
<h3 id="附件-attachment"><a href="#附件-attachment" class="headerlink" title="附件 (attachment)"></a>附件 (<code>attachment</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLED</code></td>
<td>激活该选项以允许用户上传附件</td>
</tr>
<tr>
<td><code>PATH</code></td>
<td>存放附件的路径</td>
</tr>
<tr>
<td><code>ALLOWED_TYPES</code></td>
<td>允许上传的 MIME 类型，例如 “image/jpeg|image/png”，使用 <code>*/*</code> 允许所有类型的文件</td>
</tr>
<tr>
<td><code>MAX_SIZE</code></td>
<td>最大允许上传的附件体积，单位为 MB，例如 <code>4</code></td>
</tr>
<tr>
<td><code>MAX_FILES</code></td>
<td>最大允许一次性上传的附件个数，例如 <code>5</code></td>
</tr>
</tbody></table>
<h3 id="时间-time"><a href="#时间-time" class="headerlink" title="时间 (time)"></a>时间 (<code>time</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>FORMAT</code></td>
<td>指定日期的输出格式，默认为 RFC1123，其它可选的格式为 ANSIC、UnixDate、RubyDate、RFC822、RFC822Z、RFC850、RFC1123、RFC1123Z、RFC3339、RFC3339Nano、Kitchen、Stamp、StampMilli、StampMicro 和 StampNano。访问 <a href="http://golang.org/pkg/time/#pkg-constants" target="_blank" rel="noopener">http://golang.org/pkg/time/#pkg-constants</a> 查看详情</td>
</tr>
</tbody></table>
<h3 id="日志-log"><a href="#日志-log" class="headerlink" title="日志 (log)"></a>日志 (<code>log</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ROOT_PATH</code></td>
<td>日志文件的根目录</td>
</tr>
<tr>
<td><code>MODE</code></td>
<td>日志记录模式，默认为 <code>console</code>。如果想要开启多模式，请使用逗号分割，例如：<code>&quot;console, file&quot;</code></td>
</tr>
<tr>
<td><code>LEVEL</code></td>
<td>基本日志级别，默认为 <code>Trace</code></td>
</tr>
</tbody></table>
<h4 id="日志-控制台-log-console"><a href="#日志-控制台-log-console" class="headerlink" title="日志 - 控制台 (log.console)"></a>日志 - 控制台 (<code>log.console</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>LEVEL</code></td>
<td>控制台日志级别，留空则继承父值</td>
</tr>
</tbody></table>
<h4 id="日志-文件-log-file"><a href="#日志-文件-log-file" class="headerlink" title="日志 - 文件 (log.file)"></a>日志 - 文件 (<code>log.file</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>LEVEL</code></td>
<td>文件日志级别，留空则继承父值</td>
</tr>
<tr>
<td><code>LOG_ROTATE</code></td>
<td>激活该选项以启用日志文件自转</td>
</tr>
<tr>
<td><code>DAILY_ROTATE</code></td>
<td>激活该选项以进行日常自转</td>
</tr>
<tr>
<td><code>MAX_SIZE_SHIFT</code></td>
<td>自转需要达到的最大文件体积，使用位左移，默认为 28 即 1 &lt;&lt; 28，表示 256MB</td>
</tr>
<tr>
<td><code>MAX_LINES</code></td>
<td>自转需要达到的最大文件行数，默认为 <code>1000000</code></td>
</tr>
<tr>
<td><code>MAX_DAYS</code></td>
<td>保留自转文件的最长期限，默认为 <code>7</code> 天后删除</td>
</tr>
</tbody></table>
<h4 id="日志-Slack-log-slack"><a href="#日志-Slack-log-slack" class="headerlink" title="日志 - Slack (log.slack)"></a>日志 - Slack (<code>log.slack</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>LEVEL</code></td>
<td>Slack 日志级别，留空则继承父值</td>
</tr>
<tr>
<td><code>URL</code></td>
<td>Slack Web 钩子 URL</td>
</tr>
</tbody></table>
<h4 id="日志-Discord-log-discord"><a href="#日志-Discord-log-discord" class="headerlink" title="日志 - Discord (log.discord)"></a>日志 - Discord (<code>log.discord</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>LEVEL</code></td>
<td>Discord 日志级别，留空则继承父值</td>
</tr>
<tr>
<td><code>URL</code></td>
<td>Discord Web 钩子 URL</td>
</tr>
<tr>
<td><code>USERNAME</code></td>
<td>在 Web 钩子中显示的用户名</td>
</tr>
</tbody></table>
<h3 id="Cron-cron"><a href="#Cron-cron" class="headerlink" title="Cron (cron)"></a>Cron (<code>cron</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLED</code></td>
<td>激活该选项以允许周期性运行 Cron 任务</td>
</tr>
<tr>
<td><code>RUN_AT_START</code></td>
<td>激活该选项以允许在启动时执行 Cron 任务</td>
</tr>
</tbody></table>
<h4 id="Cron-更新镜像-cron-update-mirrors"><a href="#Cron-更新镜像-cron-update-mirrors" class="headerlink" title="Cron - 更新镜像 (cron.update_mirrors)"></a>Cron - 更新镜像 (<code>cron.update_mirrors</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>SCHEDULE</code></td>
<td>定时更新仓库镜像的 Cron 语法，例如：<code>@every 1h</code></td>
</tr>
</tbody></table>
<h4 id="Cron-仓库健康检查-cron-repo-health-check"><a href="#Cron-仓库健康检查-cron-repo-health-check" class="headerlink" title="Cron - 仓库健康检查 (cron.repo_health_check)"></a>Cron - 仓库健康检查 (<code>cron.repo_health_check</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>SCHEDULE</code></td>
<td>定时进行仓库健康检查的 Cron 语法，例如：<code>@every 24h</code></td>
</tr>
<tr>
<td><code>TIMEOUT</code></td>
<td>仓库健康检查超时的定义语法，例如：<code>60s</code></td>
</tr>
<tr>
<td><code>ARGS</code></td>
<td><code>git fsck</code> 命令的参数，例如：<code>--unreachable --tags</code></td>
</tr>
</tbody></table>
<h4 id="Cron-仓库统计检查-cron-check-repo-stats"><a href="#Cron-仓库统计检查-cron-check-repo-stats" class="headerlink" title="Cron - 仓库统计检查 (cron.check_repo_stats)"></a>Cron - 仓库统计检查 (<code>cron.check_repo_stats</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>RUN_AT_START</code></td>
<td>激活该选项以在启动时执行仓库统计检查</td>
</tr>
<tr>
<td><code>SCHEDULE</code></td>
<td>定时进行仓库统计检查的 Cron 语法，例如：<code>@every 24h</code></td>
</tr>
</tbody></table>
<h4 id="Cron-仓库归档清理-cron-repo-archive-cleanup"><a href="#Cron-仓库归档清理-cron-repo-archive-cleanup" class="headerlink" title="Cron - 仓库归档清理 (cron.repo_archive_cleanup)"></a>Cron - 仓库归档清理 (<code>cron.repo_archive_cleanup</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>RUN_AT_START</code></td>
<td>激活该选项以在启动时执行仓库归档清理</td>
</tr>
<tr>
<td><code>SCHEDULE</code></td>
<td>定时进行仓库归档清理的 Cron 语法，例如：<code>@every 24h</code></td>
</tr>
<tr>
<td><code>OLDER_THAN</code></td>
<td>仓库归档的文件有效期，过期的归档将被清理，例如：<code>24h</code></td>
</tr>
</tbody></table>
<h3 id="Git-git"><a href="#Git-git" class="headerlink" title="Git (git)"></a>Git (<code>git</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>DISABLE_DIFF_HIGHLIGHT</code></td>
<td>激活该选项以禁用行内差异高亮</td>
</tr>
<tr>
<td><code>MAX_GIT_DIFF_LINES</code></td>
<td>差异对比页面单个文件显示的最大行数</td>
</tr>
<tr>
<td><code>MAX_GIT_DIFF_LINE_CHARACTERS</code></td>
<td>差异对比页面单行显示的最大字符数</td>
</tr>
<tr>
<td><code>MAX_GIT_DIFF_FILES</code></td>
<td>差异对比页面文件显示的最多个数</td>
</tr>
<tr>
<td><code>GC_ARGS</code></td>
<td><code>git gc</code> 命令的参数，例如：<code>--aggressive --auto</code></td>
</tr>
</tbody></table>
<h4 id="Git-超时-git-timeout"><a href="#Git-超时-git-timeout" class="headerlink" title="Git - 超时 (git.timeout)"></a>Git - 超时 (<code>git.timeout</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>MIGRATE</code></td>
<td>仓库迁移操作超时，默认为 <code>600</code> 秒</td>
</tr>
<tr>
<td><code>MIRROR</code></td>
<td>仓库镜像同步操作超时，默认为 <code>300</code> 秒</td>
</tr>
<tr>
<td><code>CLONE</code></td>
<td>仓库克隆操作超时，默认为 <code>300</code> 秒</td>
</tr>
<tr>
<td><code>PULL</code></td>
<td>仓库拉取操作超时，默认为 <code>300</code> 秒</td>
</tr>
<tr>
<td><code>GC</code></td>
<td>仓库垃圾回收操作超时，默认为 <code>60</code> 秒</td>
</tr>
</tbody></table>
<h3 id="UI-ui"><a href="#UI-ui" class="headerlink" title="UI (ui)"></a>UI (<code>ui</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>EXPLORE_PAGING_NUM</code></td>
<td>探索页面每页显示仓库的数量</td>
</tr>
<tr>
<td><code>ISSUE_PAGING_NUM</code></td>
<td>每页显示工单（Issue）的数量（应用到所有以列表形式显示工单的页面）</td>
</tr>
<tr>
<td><code>FEED_MAX_COMMIT_NUM</code></td>
<td>一条最新活动中显示代码提交（Commit）的最大数量</td>
</tr>
<tr>
<td><code>THEME_COLOR_META_TAG</code></td>
<td>被用于 Android &gt;= 5.0 版本 “theme-color” 标记的值，无效的值将被忽略并使用默认值（<a href="https://developers.google.com/web/updates/2014/11/Support-for-theme-color-in-Chrome-39-for-Android" target="_blank" rel="noopener">查看详情</a>）</td>
</tr>
<tr>
<td><code>MAX_DISPLAY_FILE_SIZE</code></td>
<td>显示到页面的最大文件体积（Byte）</td>
</tr>
</tbody></table>
<h4 id="UI-Admin-ui-admin"><a href="#UI-Admin-ui-admin" class="headerlink" title="UI - Admin (ui.admin)"></a>UI - Admin (<code>ui.admin</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>USER_PAGING_NUM</code></td>
<td>用户管理页面每页显示记录条数</td>
</tr>
<tr>
<td><code>REPO_PAGING_NUM</code></td>
<td>仓库管理页面每页显示记录条数</td>
</tr>
<tr>
<td><code>NOTICE_PAGING_NUM</code></td>
<td>系统提示管理页面每页显示记录条数</td>
</tr>
<tr>
<td><code>ORG_PAGING_NUM</code></td>
<td>组织管理页面每页显示记录条数</td>
</tr>
</tbody></table>
<h4 id="Prometheus-prometheus"><a href="#Prometheus-prometheus" class="headerlink" title="Prometheus (prometheus)"></a>Prometheus (<code>prometheus</code>)</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENABLED</code></td>
<td>激活该选项以启用 Prometheus 监控信息，默认为 <code>true</code></td>
</tr>
<tr>
<td><code>ENABLE_BASIC_AUTH</code></td>
<td>激活该选项以启用 HTTP 基本认证保护监控信息数据，默认为 <code>false</code></td>
</tr>
<tr>
<td><code>BASIC_AUTH_USERNAME</code></td>
<td>HTTP 基本认证的用户名</td>
</tr>
<tr>
<td><code>BASIC_AUTH_PASSWORD</code></td>
<td>HTTP 基本认证的密码</td>
</tr>
</tbody></table>
<h3 id="其他-other"><a href="#其他-other" class="headerlink" title="其他 (other)"></a>其他 (<code>other</code>)</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>SHOW_FOOTER_BRANDING</code></td>
<td>激活该选项以在页脚显示 Gogs 推广信息</td>
</tr>
<tr>
<td><code>SHOW_FOOTER_VERSION</code></td>
<td>激活该选项以在页脚显示 Gogs 版本信息</td>
</tr>
<tr>
<td><code>SHOW_FOOTER_TEMPLATE_LOAD_TIME</code></td>
<td>激活该选项以在页脚显示 Gogs 模板加载时间</td>
</tr>
</tbody></table>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/docker/">docker    </a><a class="post-meta__tags" href="/tags/CI/">CI    </a></div><div class="post_share"><div class="social-share" data-image="/img/gogs.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="http://image.13sai.com/zan.jpg"><div class="post-qr-code__desc">微信</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/12/20/190/"><img class="prev_cover lazyload" data-src="/img/grpc.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>gRPC初体验</span></div></a></div><div class="next-post pull_right"><a href="/2019/12/01/212/"><img class="next_cover lazyload" data-src="https://pic1.zhimg.com/v2-1b5aeb315b4c894cd9cceba3875f7aa3_1200x500.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>利用consul+nginx-upsync实现动态负载</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/07/31/194/" title="利用jenkins发布代码"><img class="relatedPosts_cover lazyload"data-src="http://img.13sai.com/1564475289000.png"><div class="relatedPosts_title">利用jenkins发布代码</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2014 - 2019 By 13sai</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a><img class="icp-icon" src="/img/icp.png"><span>皖ICP备14021992号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>